<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Lewis Dot Structure Builder</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
        }
        .controls {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .molecule-selector {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .molecule-btn {
            padding: 12px 24px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
        }
        .molecule-btn:hover {
            background: #764ba2;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .molecule-btn.active {
            background: #51cf66;
        }
        .workspace {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        .panel {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            border: 2px solid #e9ecef;
        }
        .panel-title {
            font-size: 20px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
            text-align: center;
        }
        .info-box {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
        }
        .info-label {
            font-weight: bold;
            color: #495057;
            margin-bottom: 5px;
        }
        .canvas-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            min-height: 400px;
            position: relative;
            border: 3px dashed #dee2e6;
        }
        .atom-palette {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        .atom-option {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: 3px solid #667eea;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }
        .atom-option:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        .atom-option.selected {
            background: #667eea;
            color: white;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
        }
        .electron-dot {
            width: 16px;
            height: 16px;
            background: #e74c3c;
            border-radius: 50%;
            cursor: pointer;
            position: absolute;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: all 0.2s;
        }
        .electron-dot:hover {
            transform: scale(1.2);
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.5);
        }
        .atom-placed {
            position: absolute;
            font-size: 40px;
            font-weight: bold;
            color: #2c3e50;
            cursor: move;
            user-select: none;
        }
        .bond-line {
            position: absolute;
            background: #34495e;
            height: 3px;
            transform-origin: left center;
            pointer-events: none;
        }
        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-check {
            background: #51cf66;
            color: white;
        }
        .btn-check:hover {
            background: #40c057;
        }
        .btn-clear {
            background: #ff6b6b;
            color: white;
        }
        .btn-clear:hover {
            background: #fa5252;
        }
        .btn-hint {
            background: #ffd43b;
            color: #333;
        }
        .btn-hint:hover {
            background: #fcc419;
        }
        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            display: none;
        }
        .feedback.show {
            display: block;
        }
        .feedback.correct {
            background: #d3f9d8;
            color: #2b8a3e;
            border: 2px solid #51cf66;
        }
        .feedback.incorrect {
            background: #ffe3e3;
            color: #c92a2a;
            border: 2px solid #ff6b6b;
        }
        .hint-box {
            background: #fff9db;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            border-left: 4px solid #ffd43b;
            display: none;
        }
        .hint-box.show {
            display: block;
        }
        .step-counter {
            text-align: center;
            font-size: 18px;
            color: #495057;
            margin-bottom: 20px;
        }
        .instruction {
            background: #e7f5ff;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #339af0;
            font-size: 16px;
        }
        @media (max-width: 768px) {
            .workspace {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Interactive Lewis Dot Structure Builder</h1>
        <div class="subtitle">Practice drawing Lewis structures by placing atoms and electrons!</div>
        
        <div class="controls">
            <div class="molecule-selector">
                <button class="molecule-btn active" data-molecule="H2">H‚ÇÇ</button>
                <button class="molecule-btn" data-molecule="H2O">H‚ÇÇO</button>
                <button class="molecule-btn" data-molecule="NH3">NH‚ÇÉ</button>
                <button class="molecule-btn" data-molecule="CH4">CH‚ÇÑ</button>
                <button class="molecule-btn" data-molecule="CO2">CO‚ÇÇ</button>
                <button class="molecule-btn" data-molecule="O2">O‚ÇÇ</button>
                <button class="molecule-btn" data-molecule="N2">N‚ÇÇ</button>
            </div>
        </div>

        <div class="workspace">
            <!-- Left Panel: Information and Instructions -->
            <div class="panel">
                <div class="panel-title">üìã Molecule Information</div>
                
                <div class="info-box">
                    <div class="info-label">Current Molecule:</div>
                    <div id="molecule-name" style="font-size: 24px; color: #667eea; font-weight: bold;">H‚ÇÇ (Hydrogen Gas)</div>
                </div>
                
                <div class="info-box">
                    <div class="info-label">Total Valence Electrons:</div>
                    <div id="total-electrons" style="font-size: 20px; color: #2c3e50;">2 electrons</div>
                </div>
                
                <div class="instruction">
                    <strong>üìù Instructions:</strong><br>
                    1. Select atoms (H, C, N, O) or electrons (e‚Åª) from the palette<br>
                    2. Click on the canvas to place them<br>
                    3. Drag to reposition atoms and electrons<br>
                    4. Double-click an atom to add 4 electrons around it<br>
                    5. Double-click an electron to remove it<br>
                    6. Click "Check Answer" when done!
                </div>
                
                <div class="info-box">
                    <div class="info-label">Step-by-Step Guide:</div>
                    <ol style="margin-left: 20px; margin-top: 10px;">
                        <li>Place the central atom first</li>
                        <li>Add surrounding atoms</li>
                        <li>Add bonds (shared electrons)</li>
                        <li>Add lone pairs to complete octets</li>
                    </ol>
                </div>
                
                <div class="hint-box" id="hint-box">
                    <strong>üí° Hint:</strong>
                    <p id="hint-text"></p>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-hint" onclick="showHint()">Show Hint</button>
                    <button class="btn btn-clear" onclick="clearCanvas()">Clear</button>
                </div>
            </div>
            
            <!-- Right Panel: Drawing Canvas -->
            <div class="panel">
                <div class="panel-title">üé® Drawing Canvas</div>
                
                <div class="atom-palette">
                    <div class="atom-option" data-atom="H" style="color: #3498db;">H</div>
                    <div class="atom-option" data-atom="C" style="color: #2c3e50;">C</div>
                    <div class="atom-option" data-atom="N" style="color: #9b59b6;">N</div>
                    <div class="atom-option" data-atom="O" style="color: #e74c3c;">O</div>
                    <div class="atom-option selected" data-atom="electron" style="background: #e74c3c; color: white; font-size: 20px;">e‚Åª</div>
                </div>
                
                <div class="step-counter">
                    <span id="atoms-placed">Atoms: 0</span> | 
                    <span id="electrons-placed">Electrons: 0</span>
                </div>
                
                <div class="canvas-container" id="canvas">
                    <!-- Drawing area -->
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-check" onclick="checkAnswer()">Check Answer</button>
                </div>
                
                <div class="feedback" id="feedback"></div>
            </div>
        </div>
    </div>

    <script>
        // Molecule database
        const molecules = {
            H2: {
                name: 'H‚ÇÇ (Hydrogen Gas)',
                totalElectrons: 2,
                atoms: { H: 2 },
                bonds: 1,
                hint: 'Two hydrogen atoms share their electrons to form one single bond. Each H gets 2 electrons total.',
                structure: {
                    atoms: ['H', 'H'],
                    bondingPairs: 1,
                    lonePairs: 0
                }
            },
            H2O: {
                name: 'H‚ÇÇO (Water)',
                totalElectrons: 8,
                atoms: { H: 2, O: 1 },
                bonds: 2,
                hint: 'Oxygen goes in the center. Two H-O bonds use 4 electrons. The remaining 4 electrons go as 2 lone pairs on oxygen.',
                structure: {
                    atoms: ['H', 'O', 'H'],
                    bondingPairs: 2,
                    lonePairs: 2
                }
            },
            NH3: {
                name: 'NH‚ÇÉ (Ammonia)',
                totalElectrons: 8,
                atoms: { N: 1, H: 3 },
                bonds: 3,
                hint: 'Nitrogen in the center, three hydrogens around it. Three N-H bonds use 6 electrons. Remaining 2 electrons form 1 lone pair on nitrogen.',
                structure: {
                    atoms: ['H', 'N', 'H', 'H'],
                    bondingPairs: 3,
                    lonePairs: 1
                }
            },
            CH4: {
                name: 'CH‚ÇÑ (Methane)',
                totalElectrons: 8,
                atoms: { C: 1, H: 4 },
                bonds: 4,
                hint: 'Carbon in the center with 4 hydrogens around it. Four C-H bonds use all 8 electrons. No lone pairs!',
                structure: {
                    atoms: ['H', 'C', 'H', 'H', 'H'],
                    bondingPairs: 4,
                    lonePairs: 0
                }
            },
            CO2: {
                name: 'CO‚ÇÇ (Carbon Dioxide)',
                totalElectrons: 16,
                atoms: { C: 1, O: 2 },
                bonds: 4,
                hint: 'Carbon in center, oxygens on sides. Carbon needs DOUBLE bonds to each oxygen (O=C=O). Each oxygen gets 2 lone pairs.',
                structure: {
                    atoms: ['O', 'C', 'O'],
                    bondingPairs: 4,
                    lonePairs: 4
                }
            },
            O2: {
                name: 'O‚ÇÇ (Oxygen Gas)',
                totalElectrons: 12,
                atoms: { O: 2 },
                bonds: 2,
                hint: 'Two oxygen atoms share a DOUBLE bond (O=O). Each oxygen also has 2 lone pairs (4 electrons each).',
                structure: {
                    atoms: ['O', 'O'],
                    bondingPairs: 2,
                    lonePairs: 4
                }
            },
            N2: {
                name: 'N‚ÇÇ (Nitrogen Gas)',
                totalElectrons: 10,
                atoms: { N: 2 },
                bonds: 3,
                hint: 'Two nitrogen atoms share a TRIPLE bond (N‚â°N). Each nitrogen has 1 lone pair (2 electrons).',
                structure: {
                    atoms: ['N', 'N'],
                    bondingPairs: 3,
                    lonePairs: 2
                }
            }
        };

        let currentMolecule = 'H2';
        let selectedAtom = 'electron';
        let placedAtoms = [];
        let placedElectrons = [];
        let isDragging = false;
        let draggedElement = null;

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateMoleculeInfo();
            setupEventListeners();
        });

        function setupEventListeners() {
            // Molecule selection
            document.querySelectorAll('.molecule-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    document.querySelectorAll('.molecule-btn').forEach(b => b.classList.remove('active'));
                    e.target.classList.add('active');
                    currentMolecule = e.target.dataset.molecule;
                    updateMoleculeInfo();
                    clearCanvas();
                });
            });

            // Atom palette selection
            document.querySelectorAll('.atom-option').forEach(option => {
                option.addEventListener('click', (e) => {
                    document.querySelectorAll('.atom-option').forEach(o => o.classList.remove('selected'));
                    e.target.classList.add('selected');
                    selectedAtom = e.target.dataset.atom;
                });
            });

            // Canvas click to place atoms
            document.getElementById('canvas').addEventListener('click', (e) => {
                if (e.target.id === 'canvas' || e.target.classList.contains('canvas-container')) {
                    placeAtom(e.offsetX, e.offsetY);
                }
            });
        }

        function updateMoleculeInfo() {
            const mol = molecules[currentMolecule];
            document.getElementById('molecule-name').textContent = mol.name;
            document.getElementById('total-electrons').textContent = `${mol.totalElectrons} electrons`;
            document.getElementById('hint-box').classList.remove('show');
            document.getElementById('feedback').classList.remove('show');
        }

        function placeAtom(x, y) {
            // If electron is selected, place an electron instead
            if (selectedAtom === 'electron') {
                addElectron(x, y);
                return;
            }
            
            const canvas = document.getElementById('canvas');
            const atom = document.createElement('div');
            atom.className = 'atom-placed';
            atom.textContent = selectedAtom;
            atom.style.left = (x - 20) + 'px';
            atom.style.top = (y - 20) + 'px';
            
            // Color coding
            const colors = { H: '#3498db', C: '#2c3e50', N: '#9b59b6', O: '#e74c3c' };
            atom.style.color = colors[selectedAtom];
            
            // Make draggable
            atom.addEventListener('mousedown', startDrag);
            atom.addEventListener('dblclick', () => {
                addElectronsAroundAtom(atom);
            });
            
            canvas.appendChild(atom);
            placedAtoms.push({ element: atom, type: selectedAtom, x: x, y: y });
            updateCounter();
        }

        function addElectronsAroundAtom(atom) {
            const rect = atom.getBoundingClientRect();
            const canvasRect = document.getElementById('canvas').getBoundingClientRect();
            const centerX = rect.left - canvasRect.left + rect.width / 2;
            const centerY = rect.top - canvasRect.top + rect.height / 2;
            
            // Add 4 electrons around the atom
            const positions = [
                { x: centerX - 40, y: centerY - 40 }, // top-left
                { x: centerX + 40, y: centerY - 40 }, // top-right
                { x: centerX - 40, y: centerY + 40 }, // bottom-left
                { x: centerX + 40, y: centerY + 40 }  // bottom-right
            ];
            
            positions.forEach(pos => {
                addElectron(pos.x, pos.y);
            });
        }

        function addElectron(x, y) {
            const canvas = document.getElementById('canvas');
            const electron = document.createElement('div');
            electron.className = 'electron-dot';
            electron.style.left = (x - 8) + 'px';
            electron.style.top = (y - 8) + 'px';
            
            electron.addEventListener('mousedown', startDrag);
            electron.addEventListener('dblclick', () => {
                electron.remove();
                placedElectrons = placedElectrons.filter(e => e.element !== electron);
                updateCounter();
            });
            
            canvas.appendChild(electron);
            placedElectrons.push({ element: electron, x: x, y: y });
            updateCounter();
        }

        function startDrag(e) {
            isDragging = true;
            draggedElement = e.target;
            draggedElement.style.zIndex = '1000';
        }

        document.addEventListener('mousemove', (e) => {
            if (isDragging && draggedElement) {
                const canvas = document.getElementById('canvas');
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                if (draggedElement.classList.contains('atom-placed')) {
                    draggedElement.style.left = (x - 20) + 'px';
                    draggedElement.style.top = (y - 20) + 'px';
                } else if (draggedElement.classList.contains('electron-dot')) {
                    draggedElement.style.left = (x - 8) + 'px';
                    draggedElement.style.top = (y - 8) + 'px';
                }
            }
        });

        document.addEventListener('mouseup', () => {
            if (draggedElement) {
                draggedElement.style.zIndex = 'auto';
            }
            isDragging = false;
            draggedElement = null;
        });

        function updateCounter() {
            document.getElementById('atoms-placed').textContent = `Atoms: ${placedAtoms.length}`;
            document.getElementById('electrons-placed').textContent = `Electrons: ${placedElectrons.length}`;
        }

        function clearCanvas() {
            document.getElementById('canvas').innerHTML = '';
            placedAtoms = [];
            placedElectrons = [];
            updateCounter();
            document.getElementById('feedback').classList.remove('show');
            document.getElementById('hint-box').classList.remove('show');
        }

        function showHint() {
            const mol = molecules[currentMolecule];
            document.getElementById('hint-text').textContent = mol.hint;
            document.getElementById('hint-box').classList.add('show');
        }

        function checkAnswer() {
            const mol = molecules[currentMolecule];
            const feedback = document.getElementById('feedback');
            
            // Count atoms by type
            const atomCounts = {};
            placedAtoms.forEach(a => {
                atomCounts[a.type] = (atomCounts[a.type] || 0) + 1;
            });
            
            // Check if correct number of atoms
            let atomsCorrect = true;
            for (let atom in mol.atoms) {
                if (atomCounts[atom] !== mol.atoms[atom]) {
                    atomsCorrect = false;
                    break;
                }
            }
            
            // Check electron count
            const electronsCorrect = placedElectrons.length === mol.totalElectrons;
            
            if (atomsCorrect && electronsCorrect) {
                feedback.className = 'feedback correct show';
                feedback.innerHTML = 'üéâ Excellent! Your Lewis structure looks great!<br>All atoms and electrons are accounted for!';
            } else {
                feedback.className = 'feedback incorrect show';
                let message = '‚ùå Not quite right. ';
                if (!atomsCorrect) {
                    message += 'Check the number and types of atoms. ';
                }
                if (!electronsCorrect) {
                    message += `You need exactly ${mol.totalElectrons} electrons total (you have ${placedElectrons.length}). `;
                }
                message += '<br>Try the hint button for help!';
                feedback.innerHTML = message;
            }
        }
    </script>
</body>
</html>
